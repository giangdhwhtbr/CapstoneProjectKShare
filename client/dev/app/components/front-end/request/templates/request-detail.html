<br/><br/>
<div class="container " *ngIf="request && knowledge">
    <h3>{{request.title}}</h3>
    <div class="col-xs-12 col-sm-9 fixEfMenu">
        <div class="panel panel-default card-rq">
            <div class="panel-body">


                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fixEfMenu">
                    Người tạo : <a [routerLink]=[request.userlink]>{{request.user}}</a>
                </div>
                <br>

                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fixEfMenu">
                    Lĩnh vực : {{knowledge.name}}
                </div>
                <br>

                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 fixEfMenu" hidden>
                    ID : {{request._id}}
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 fixEfMenu">
                    Trạng thái : {{request.status}}
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 text-left fixEfMenu">
                    Ngày tạo : {{request.createdAt | date:"dd/MM/yyyy"}}
                </div>
                <div id="bodyReq" class="col-xs-12">

                </div>
                <div class="row" *ngIf="subscribers">
                    Danh sách theo dõi :
                    <p *ngFor="let subscriber of subscribers"><a [routerLink]="['/user/' + subscriber]">{{subscriber}}</a></p>
                </div>
            </div>
        </div>
    </div>

    <div [hidden]="!checkDeactive" class="col-xs-12 col-sm-6 col-md-6 col-lg-6 fixEfMenu">
        Yêu cần này đã kết thúc
    </div>

    <div [hidden]="checkDeactive" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fixEfMenu">
        <button *ngIf="userToken !== null && roleToken !== 'admin' && userToken !== request.user" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#myModal">Báo cáo</button>
        <a href="{{updateLink}}" *ngIf="checkCreatedUser || roleToken==='admin'"><span
                class="btn btn-warning">Chỉnh sửa</span></a>
        <a *ngIf="checkCreatedUser || roleToken==='admin'">
            <button class="btn btn-danger" (click)="deactivateRequest(_id)">Ngừng</button>
        </a>
        <a *ngIf="!checkCreatedUser || roleToken==='admin'">
            <button *ngIf="userToken !== null"  class="btn btn-primary" (click)="openModal()">Đề nghị</button>
        </a>
        <a *ngIf="!checkCreatedUser || userToken !== null">
            <button *ngIf="userToken !== null && !checkSubcribedUser" class="btn btn-primary" (click)="addSubcriber(_id)">Theo dõi</button>
        </a>
        <a *ngIf="!checkCreatedUser || userToken !== null">
            <button *ngIf="userToken !== null && checkSubcribedUser" class="btn btn-primary" (click)="removeSubscriber()">Bỏ theo dõi</button>
        </a>
    </div>
</div>
<offer-create rid="{{_id}}" (sendDataToP)="action($event)"></offer-create>
<br>
<!-- List offer of a back.request -->
<div *ngIf="offers" class="container" style="min-height:437px" id="request-ofer">
    <div class="col-xs-12 col-sm-9 fixEfMenu" *ngIf="offers">
        <div class="panel panel-default card-rq" *ngFor="let offer of offers">
            <div class="panel-body">
                <span *ngIf="offer.status==='Được chấp nhận'" class="glyphicon glyphicon-ok" style="color:green;"></span>

                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fixEfMenu">
                    Người tạo : <a [routerLink]="['/user/' + offer.user]">{{offer.user}}</a>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fixEfMenu">
                    Trạng thái : {{offer.status}}
                </div>
                <br>

                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 fixEfMenu">
                    Lời nhắn : {{offer.message}}
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 text-left fixEfMenu">
                    Ngày tạo : {{offer.createdAt | date:"dd/MM/yyyy"}}
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 text-left fixEfMenu">
                    <a *ngIf="checkCreatedUser && !checkIsAcceped">
                        <button class="btn btn-sm btn-success" (click)="addKshare(offer.user,offer._id)">Chấp thuận
                        </button>
                    </a>
                    <a *ngIf="checkCreatedUser && checkIsAcceped">
                        <button disabled class="btn btn-sm btn-success">Chấp thuận</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<report *ngIf="request" reportedUser="{{request.user}}"></report>
<private-chat></private-chat>